# Render Blueprint for Mission Control
# 
# DEPLOYMENT INSTRUCTIONS:
# 
# Option A - Blueprint (Easiest):
# 1. Go to https://dashboard.render.com/blueprints
# 2. Click "New Blueprint Instance"
# 3. Connect this repo
# 4. Render creates both database and web service automatically
#
# Option B - Manual:
# 1. Create PostgreSQL database on Render first
# 2. Create Web Service from this repo
# 3. Add DATABASE_URL env var manually
# 4. Deploy

services:
  - type: web
    name: mission-control
    runtime: node
    repo: https://github.com/Macrojordan/mission-control-kanban
    branch: main
    buildCommand: cd backend && npm ci
    startCommand: cd backend && node server.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: APP_PASSWORD
        value: agentboss2026
      # DATABASE_URL will be auto-set if using Blueprint
      # or manually set if using Option B
    healthCheckPath: /health
    # Free plan settings
    plan: free
    # Auto-deploy on git push
    autoDeploy: true

databases:
  - name: mission-control-db
    databaseName: mission_control
    user: mission_control
    plan: free
    # Note: Free PostgreSQL on Render expires after 90 days of inactivity
    # and is deleted after 30 days of expiration
